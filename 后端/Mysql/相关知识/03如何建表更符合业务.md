# 索引组织表（Index Organized Table）

![](image/Pasted%20image%2020220302205051.png)



## 索引（Index）

![](image/Pasted%20image%2020220302205306.png)

## 主键（Primary Key）

![](image/Pasted%20image%2020220302205448.png)

## 演示

![](image/Pasted%20image%2020220302205734.png)

![](image/Pasted%20image%2020220302211727.png)

## 总结

![](image/Pasted%20image%2020220302211850.png)

# B+树的 B 是什么意思

## 主流索引查找算法

![](image/Pasted%20image%2020220302214235.png)

## 线性查找 Linear Search

![](image/Pasted%20image%2020220302214659.png)

## 二分查找 Binary Search

![](image/Pasted%20image%2020220302214928.png)

## 二叉查找树 Binary Search Tree

![](image/Pasted%20image%2020220302215511.png)

## 平衡二叉树 AVL Tree 

![](image/Pasted%20image%2020220302215639.png)

## B树 B Tree

![](image/Pasted%20image%2020220302220449.png)

![](image/Pasted%20image%2020220302220734.png)

## B+树 B+ Tree

![](image/Pasted%20image%2020220302221153.png)

![](image/Pasted%20image%2020220302220838.png)

## 总结

![](image/Pasted%20image%2020220302221418.png)

# InnoDB索引即数据

## B+树索引

![](image/Pasted%20image%2020220302222013.png)

## 聚簇索引（Cluster Index）

![](image/Pasted%20image%2020220302222324.png)

![](image/Pasted%20image%2020220302222417.png)

## 辅助索引 Secondary Index

![](image/Pasted%20image%2020220302223324.png)

## 总结

![](image/Pasted%20image%2020220302223417.png)

# InnoDB数据表如何储存

![](image/Pasted%20image%2020220302224221.png)

### 表空间（Tablespace）

![](image/Pasted%20image%2020220302224428.png)

![](image/Pasted%20image%2020220302224400.png)

## 段（Segment）

![](image/Pasted%20image%2020220302224629.png)

![](image/Pasted%20image%2020220302224710.png)

## 区（Extent）

![](image/Pasted%20image%2020220302224834.png)

![](image/Pasted%20image%2020220302225006.png)

## 页（Page）

![](image/Pasted%20image%2020220302225137.png)

![](image/Pasted%20image%2020220302225227.png)

## 总结

![](image/Pasted%20image%2020220302225931.png)

## 思考

![](image/Pasted%20image%2020220302225951.png)

# InnoDB数据行

## InnoDB中的变长列

![](image/Pasted%20image%2020220302231349.png)

## 行溢出数据

![](image/Pasted%20image%2020220302233308.png)

![](image/Pasted%20image%2020220302233349.png)

![](image/Pasted%20image%2020220302233531.png)

# InnoDB行记录格式 Row Format

![](image/Pasted%20image%2020220303172106.png)

## Redundant

### 字段偏移列表

![](image/Pasted%20image%2020220303172834.png)

### Header

![](image/Pasted%20image%2020220303173105.png)

### RowID

![](image/Pasted%20image%2020220303173202.png)

### TxID、Roll Pointer

![](image/Pasted%20image%2020220303173315.png)

### Col

![](image/Pasted%20image%2020220303173341.png)

![](image/Pasted%20image%2020220303173623.png)

## Compact

### 变长字段长度表

![](image/Pasted%20image%2020220303173939.png)

### NULL标志位

![](image/Pasted%20image%2020220303174200.png)

### Header

![](image/Pasted%20image%2020220303174236.png)

### RowID

![](image/Pasted%20image%2020220303174420.png)

### TxID、Roll Pointer

![](image/Pasted%20image%2020220303174437.png)

### Col

![](image/Pasted%20image%2020220303174548.png)

## Dynamic

![](image/Pasted%20image%2020220303174958.png)

## Compressed

![](image/Pasted%20image%2020220303175240.png)

## 总结

![](image/Pasted%20image%2020220303175652.png)

# 索引有哪些“左侧用法”

## 联合索引

![](image/Pasted%20image%2020220303180301.png)

## 字符串的前缀索引

![](image/Pasted%20image%2020220303195208.png)

## 字符串like

![](image/Pasted%20image%2020220303195514.png)

## 总结

![](image/Pasted%20image%2020220303195639.png)

# 如何约束数据

![](image/Pasted%20image%2020220303195742.png)

## Primary Key / Unique Key

![](image/Pasted%20image%2020220303195931.png)

## Foreign Key

![](image/Pasted%20image%2020220303200039.png)

## Default / NOT NULL

![](image/Pasted%20image%2020220303200625.png)

## 触发器

![](image/Pasted%20image%2020220303200818.png)

## 总结

![](image/Pasted%20image%2020220303200856.png)

```mysql
SHOW VARIABLES LIKE 'innodb_strict_mode';
```

![](image/Pasted%20image%2020220303201153.png)

# 如何使用不存在的数据表

## 视图 View

![](image/Pasted%20image%2020220303201425.png)

## 视图算法的选择

![](image/Pasted%20image%2020220303201643.png)

## 无法使用MERGE的SQL

![](image/Pasted%20image%2020220303203528.png)

## 总结

![](image/Pasted%20image%2020220303203909.png)

# 小结

## 中心思想

![](image/Pasted%20image%2020220303204225.png)

## 数据结构与储存结构的完美结构

![](image/Pasted%20image%2020220303204406.png)

![](image/Pasted%20image%2020220303204817.png)

## InnoDB行记录格式

![](image/Pasted%20image%2020220303204858.png)

## 索引的左侧用法

![](image/Pasted%20image%2020220303204923.png)

## 数据约束

![](image/Pasted%20image%2020220303204948.png)

## 视图 View

![](image/Pasted%20image%2020220303205018.png)

## 理论和实践

![](image/Pasted%20image%2020220303205200.png)

![](image/Pasted%20image%2020220303205238.png)

![](image/Pasted%20image%2020220303205351.png)

## 思考

![](image/Pasted%20image%2020220303205409.png)

