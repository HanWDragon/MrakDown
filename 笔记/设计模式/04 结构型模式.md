# 外观（门面）模式

## 定义

![](image/Pasted%20image%2020241227215801.png)

## 适用场景

![](image/Pasted%20image%2020241227215822.png)

## 优点

![](image/Pasted%20image%2020241227215907.png)

## 缺点

![](image/Pasted%20image%2020241227215918.png)

## 扩展

- 外观模式关注的是外界和子系统交互
- 中介者模式是子系统内部的交互
- 将外观对象做成单例
- 通过抽象工厂将子系统对外界屏蔽

![](image/Pasted%20image%2020241227215956.png)

## 源码

- 在乎的就是业务代码是否和子系统进行交互，如果有门面模式就算比较失败了

![](image/Pasted%20image%2020241227221739.png)

```java
public class Test {
    public static void main(String[] args) {
        PointsGift pointsGift = new PointsGift("T恤");
        GiftExchangeService giftExchangeService = new GiftExchangeService();
        giftExchangeService.giftExchange(pointsGift);
    }
}


public class PointsGift {
    private String name;

    public PointsGift(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
}

public class GiftExchangeService {
    private QualifyService qualifyService = new QualifyService();
    private PointsPaymentService pointsPaymentService = new PointsPaymentService();
    private ShippingService shippingService = new ShippingService();

    public void giftExchange(PointsGift pointsGift){
        if(qualifyService.isAvailable(pointsGift)){
            //资格校验通过
            if(pointsPaymentService.pay(pointsGift)){
                //如果支付积分成功
                String shippingOrderNo = shippingService.shipGift(pointsGift);
                System.out.println("物流系统下单成功,订单号是:"+shippingOrderNo);
            }
        }
    }

}

public class PointsPaymentService {
    public boolean pay(PointsGift pointsGift){
        //扣减积分
        System.out.println("支付"+pointsGift.getName()+" 积分成功");
        return true;
    }

}


public class QualifyService {
    public boolean isAvailable(PointsGift pointsGift){
        System.out.println("校验"+pointsGift.getName()+" 积分资格通过,库存通过");
        return true;
    }
}


public class ShippingService {
    public String shipGift(PointsGift pointsGift){
        //物流系统的对接逻辑
        System.out.println(pointsGift.getName()+"进入物流系统");
        String shippingOrderNo = "666";
        return shippingOrderNo;
    }
}

```

## 源码

- 在 SpringJDBC 中 JdbcUtils 对原生的 JDBC 进行封装
- 在 Mybatis 中 Configuration  new 开头的方法也使用了外观模式
- Tomcat 中的 RequestFacade ResponseFacade 之类以 Facade 结尾的类，基本都是使用外观模式，对外感觉就是操作原生 api